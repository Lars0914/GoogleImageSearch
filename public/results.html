<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Lens Image Search - Results</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
            position: relative;
            padding-top: 4rem; /* Space for fixed button */
        }
        .back-button {
            position: fixed;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            background-color: #4a5568;
            color: #fff;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            text-decoration: none;
            z-index: 1001;
        }
        .back-button:hover {
            background-color: #2d3748;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(20rem, 1fr));
            gap: 1.5rem;
            padding: 2rem;
            padding-top: 3rem; /* Offset for fixed button */
        }
        .result-card {
            background: rgba(45, 55, 72, 0.9);
            border-radius: 1rem;
            padding: 1rem;
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
        }
        .result-card:hover {
            transform: translateY(-5px);
        }
        .result-image {
            max-width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: rgba(45, 55, 72, 0.9);
            border-radius: 1rem;
            max-width: 90%;
            width: 300px;
            padding: 1.5rem;
            position: relative;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: auto; /* Adjust height to content */
            max-height: 80vh; /* Limit max height */
            overflow-y: auto; /* Scroll if content overflows */
        }
        .modal-image {
            max-width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }
        .close {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            font-size: 1.5rem;
            color: #fff;
            cursor: pointer;
        }
        @media (min-width: 640px) {
            .modal-content {
                width: 400px;
            }
        }
        @media (min-width: 1024px) {
            .modal-content {
                width: 500px;
            }
        }
    </style>
</head>
<body>
    <a href="/index.html" class="back-button">Back to Home</a>
    <div id="resultsContainer" class="grid-container"></div>
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <img id="modalImage" src="" alt="Modal Image" class="modal-image hidden">
            <h2 id="modalName" class="text-xl font-bold mb-2"></h2>
            <p><strong>Brand:</strong> <span id="modalBrand"></span></p>
            <p><strong>Product Type:</strong> <span id="modalProductType"></span></p>
            <p><strong>Hardware Material:</strong> <span id="modalHardwareMaterial"></span></p>
            <p><strong>Size:</strong> <span id="modalSize"></span></p>
            <p><strong>Estimated Value:</strong> <span id="modalEstimatedValue"></span></p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        AOS.init({ duration: 800, once: true });

        const results = JSON.parse(localStorage.getItem('searchResults')) || [];
        const resultsContainer = document.getElementById('resultsContainer');
        const modal = document.getElementById('modal');
        const modalImage = document.getElementById('modalImage');
        const modalName = document.getElementById('modalName');
        const modalBrand = document.getElementById('modalBrand');
        const modalProductType = document.getElementById('modalProductType');
        const modalHardwareMaterial = document.getElementById('modalHardwareMaterial');
        const modalSize = document.getElementById('modalSize');
        const modalEstimatedValue = document.getElementById('modalEstimatedValue');

        function generateProductData(title) {
            const categories = {
                handbag: { keywords: ['handbag', 'purse', 'bag', 'tote', 'clutch'], materials: ['Leather, Metal', 'Canvas, Gold Hardware', 'Patent Leather, Ruthenium'], sizes: ['25x15x10cm', '30x20x10cm', '35x25x15cm'], priceRanges: [500, 5000] },
                watch: { keywords: ['watch', 'timepiece', 'rolex', 'cartier'], materials: ['Oystersteel', '18k Gold', 'Stainless Steel'], sizes: ['37mm', '40mm', '44mm'], priceRanges: [5000, 75000] },
                shoe: { keywords: ['shoe', 'sneaker', 'boot', 'nike', 'adidas'], materials: ['Synthetics, Mesh', 'Leather, Rubber', 'Suede'], sizes: ['US 5-15', 'EU 36-46', 'UK 4-12'], priceRanges: [50, 2000] },
                dress: { keywords: ['dress', 'gown', 'chanel dress'], materials: ['Tweed, Silk', 'Chiffon, Pearls', 'Satin'], sizes: ['S-XXL', '2-14', '36-44'], priceRanges: [1000, 100000] },
                wallet: { keywords: ['wallet', 'billfold', 'louis vuitton wallet'], materials: ['Leather, Canvas', 'Metal Hardware', 'Suede Lining'], sizes: ['10x15cm', '12x10cm', '15x8cm'], priceRanges: [285, 6885] },
                jewelry: { keywords: ['jewelry', 'necklace', 'bracelet', 'ring', 'cartier'], materials: ['Gold, Diamonds', 'Silver, Gemstones', 'Platinum'], sizes: ['Adjustable', '18-20in', '7-9'], priceRanges: [1000, 50000] }
            };

            let category = 'other';
            let selectedCategory = { materials: ['Varies'], sizes: ['Varies'], priceRanges: [50, 300] };
            title = title.toLowerCase();
            for (const [cat, data] of Object.entries(categories)) {
                if (data.keywords.some(keyword => title.includes(keyword))) {
                    category = cat;
                    selectedCategory = data;
                    break;
                }
            }

            const brands = ['Gucci', 'Prada', 'Louis Vuitton', 'Chanel', 'HermÃ¨s', 'Dior', 'Coach', 'Michael Kors', 'Kate Spade', 'Tory Burch', 'Rolex', 'Cartier', 'Nike', 'Adidas', 'Generic'];
            const detectedBrand = brands.find(b => title.includes(b.toLowerCase())) || 'Generic';

            const [minPrice, maxPrice] = selectedCategory.priceRanges;
            const priceLow = minPrice.toLocaleString('en-US');
            const priceHigh = maxPrice.toLocaleString('en-US');

            const name = title.split(' ').slice(0, 3).join(' ').replace(detectedBrand, '').trim() || `${detectedBrand} ${category.charAt(0).toUpperCase() + category.slice(1)}`;
            const hardwareMaterial = selectedCategory.materials[Math.floor(Math.random() * selectedCategory.materials.length)];
            const productType = category.charAt(0).toUpperCase() + category.slice(1);
            const size = selectedCategory.sizes[Math.floor(Math.random() * selectedCategory.sizes.length)];
            const estimatedValue = `US$${priceLow} - US$${priceHigh} (estimated value without considering the condition)`;

            return { brand: detectedBrand, name, hardwareMaterial, productType, size, estimatedValue };
        }

        function openModal(index) {
            const result = results[index];
            const productData = generateProductData(result.title);
            const imageUrl = result.thumbnail || result.original_image;

            modalName.textContent = productData.name;
            modalBrand.textContent = productData.brand;
            modalProductType.textContent = productData.productType;
            modalHardwareMaterial.textContent = productData.hardwareMaterial;
            modalSize.textContent = productData.size;
            modalEstimatedValue.textContent = productData.estimatedValue;

            if (imageUrl) {
                modalImage.src = imageUrl;
                modalImage.classList.remove('hidden');
            } else {
                modalImage.classList.add('hidden');
            }

            modal.style.display = 'flex';
        }

        function closeModal() {
            modal.style.display = 'none';
        }

        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                closeModal();
            }
        });

        if (results.length > 0) {
            results.forEach((result, index) => {
                const productData = generateProductData(result.title);
                const card = document.createElement('div');
                card.className = 'result-card';
                card.setAttribute('data-aos', index % 2 === 0 ? 'fade-up' : 'zoom-in');
                card.setAttribute('data-aos-delay', `${index * 100}`);
                card.innerHTML = `
                    ${result.thumbnail ? `<img src="${result.thumbnail}" alt="${productData.name}" class="result-image">` : ''}
                    <h2 class="text-xl font-bold text-white">${productData.name}</h2>
                    <p class="text-gray-300"><strong>Hardware Material:</strong> ${productData.hardwareMaterial}</p>
                    <p class="text-gray-300"><strong>Product Type:</strong> ${productData.productType}</p>
                    <p class="text-gray-300"><strong>Size:</strong> ${productData.size}</p>
                    <p class="text-gray-300"><strong>Estimated Value:</strong> ${productData.estimatedValue}</p>
                    <button class="btn mt-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700" onclick="openModal(${index})">Quick View</button>
                `;
                resultsContainer.appendChild(card);
            });
        } else {
            resultsContainer.innerHTML = '<p class="text-white text-center">No results found.</p>';
        }
    </script>
</body>
</html>